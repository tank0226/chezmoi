[!exec:tar] stop

mksourcedir

[windows] unix2dos golden/archive

chezmoi archive --output=archive.tar
exec tar -tf archive.tar
cmp stdout golden/archive-tar

[short] stop

chezmoi archive --gzip --output=archive.tar.gz
exec tar -tzf archive.tar.gz
cmp stdout golden/archive-tar

[!exec:unzip] stop

chezmoi archive --format=zip --output=archive.zip
exec unzip -t archive.zip
cmp stdout golden/archive-zip

-- golden/archive-tar --
.bashrc
.binary
.exists
.gitconfig
.hushlogin
.ssh/
.ssh/config
.symlink
-- golden/archive-zip --
Archive:  archive.zip
    testing: .bashrc                  OK
    testing: .binary                  OK
    testing: .exists                  OK
    testing: .gitconfig               OK
    testing: .hushlogin               OK
    testing: .ssh                     OK
    testing: .ssh/config              OK
    testing: .symlink                 OK
No errors detected in compressed data of archive.zip.
